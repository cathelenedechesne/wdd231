import{fetchWeatherData as e,displayCurrentWeather as t,weatherUrl as n}from"./weather.js";document.addEventListener("DOMContentLoaded",()=>{let a=new Date().getFullYear(),i=document.getElementById("year");i&&(i.textContent=a);let l=document.lastModified,o=document.getElementById("lastModified");o&&(o.textContent="Last modified: "+l);let d=document.querySelector("#myButton"),s=document.querySelector("#animateme");if(d&&s&&d.addEventListener("click",()=>{s.classList.toggle("open"),d.classList.toggle("open")}),window.location.pathname.includes("index.html")){function r(e){let t=e.coords.latitude,n=e.coords.longitude,a=`https://www.google.com/maps/dir/?api=1&origin=${t},${n}&destination=-38.1428899770511,145.1180952744731&travelmode=driving`;window.open(a,"_blank")}function c(e){console.error("Geolocation error:",e),alert("Unable to retrieve your location.")}document.getElementById("join").addEventListener("click",function(){window.location.href="https://cathelenedechesne.github.io/wdd231/project/subscribe.html"}),e(n,t),document.getElementById("directions-btn").addEventListener("click",()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r,c):alert("Geolocation is not supported by this browser.")})}if(window.location.pathname.includes("about.html")){async function m(){try{let e=await fetch("data/resto-hotel.json");if(!e.ok)throw Error("Network response was not ok "+e.statusText);let t=await e.json();console.log("Fetched data:",t),p(t.restaurants),h(t.hotels)}catch(n){console.error("Error fetching data:",n),document.getElementById("food-card").innerHTML="<p>Error loading restaurant data.</p>",document.getElementById("hotel-card").innerHTML="<p>Error loading hotel data.</p>"}}function p(e){let t=document.getElementById("food-card");t.innerHTML='<h2 class="title-card">Restaurants</h2>';let n=document.createElement("div");n.classList.add("card-content");let a=e.slice(0,3),i=e.slice(3);if(a.length){if(a.forEach(e=>{let t=document.createElement("div");t.classList.add("item","card"),t.innerHTML=`
    <div class="card-image">
        <img src="${e.image}" alt="${e.name}">
    </div>
    <div class="card-details">
        <h2>${e.name}</h2>
        <p>${e.description}</p>
        <a href="${e.menu}" target="_blank">View Menu</a>
        <p>${e.location}</p>
    </div>
`,n.appendChild(t)}),t.appendChild(n),i.length){let l=document.createElement("button");l.classList.add("show-more"),l.textContent="Show More",l.addEventListener("click",()=>{g(i,"Restaurants")}),t.appendChild(l)}}else t.innerHTML+="<p>No restaurants found.</p>"}function h(e){let t=document.getElementById("hotel-card");t.innerHTML='<h2 class="title-card">Hotels</h2>';let n=document.createElement("div");n.classList.add("card-content");let a=e.slice(0,3),i=e.slice(3);if(a.length){if(a.forEach(e=>{let t=document.createElement("div");t.classList.add("item","card"),t.innerHTML=`
    <div class="card-image">
        <img src="${e.image}" alt="${e.name}">
    </div>
    <div class="card-details">
        <h2>${e.name}</h2>
        <p>${e.description}</p>
        <a href="${e.website}" target="_blank">Website</a>
        <p>Rating: ${e.rating}</p>
        <p>${e.location}</p>
    </div>
`,n.appendChild(t)}),t.appendChild(n),i.length){let l=document.createElement("button");l.classList.add("show-more"),l.textContent="Show More",l.addEventListener("click",()=>{g(i,"Hotels")}),t.appendChild(l)}}else t.innerHTML+="<p>No hotels found.</p>"}function g(e,t){let n=document.createElement("div");n.classList.add("modal"),n.innerHTML=`
<div class="modal-content">
<span class="close">&times;</span>
<h2>${t}</h2>
<div class="card-content">
    ${e.map(e=>`
        <div class="item card">
            <div class="card-image">
                <img src="${e.image}" alt="${e.name}">
            </div>
            <div class="card-details">
                <h2>${e.name}</h2>
                <p>${e.description}</p>
                <a href="${"Restaurants"===t?e.menu:e.website}" target="_blank">${"Restaurants"===t?"View Menu":"Website"}</a>
                <p>${e.location}</p>
            </div>
        </div>
    `).join("")}
</div>
</div>
`,document.body.appendChild(n),n.style.display="block";let a=n.querySelector(".close");a.addEventListener("click",()=>{n.style.display="none",document.body.removeChild(n)}),window.addEventListener("click",e=>{e.target===n&&(n.style.display="none",document.body.removeChild(n))})}m()}if(window.location.pathname.includes("subscribe.html")){let u=document.getElementById("timestamp");if(u){let v=new Date().toISOString();u.value=v,localStorage.setItem("timestamp",v)}}if(window.location.pathname.includes("thankyou.html")){let f=new URLSearchParams(window.location.search);document.getElementById("first-name").textContent=f.get("first")||"N/A",document.getElementById("last-name").textContent=f.get("last")||"N/A",document.getElementById("email").textContent=f.get("email")||"N/A",document.getElementById("phone").textContent=f.get("phone")||"N/A",document.getElementById("timestamp").textContent=f.get("timestamp")||"N/A"}});